
# TileMapEditor 利用ガイド

## 概要

`TileMapEditor` はUnityエディタ拡張として動作し、タイルマップシーンの新規作成・編集・エクスポートを効率化するツールです。  
主に `summer2025_hunt_tile` マスタ用のマップデータ作成・管理・出力をサポートします。  
タイル配置自体はUnity標準のTilemap機能を利用します（詳細は[こちら](https://hiyotama.hatenablog.com/entry/2021/03/10/221323)等を参照）。

---

## 主な機能

- **新規作成**  
  テンプレートシーン（`MapEditorTemplate.unity`）を複製し、指定したグループID・連番で `Assets/MapEditor/Scene` に新しいシーンを作成し、自動で開きます。

- **編集**  
  `Assets/MapEditor/Scene` 内のシーンファイルをファイルピッカーで選択し、開くことができます。

- **エクスポート**  
  現在開いているシーンのタイルマップ情報を `Assets/MapEditor/Migration/` 配下にテキスト形式で出力します。  
  ファイル名はシーン名と同じ（例: `tilemap_1_1.unity` → `tilemap_1_1.txt`）です。  
  既存のエクスポートファイルがある場合は上書きされます。

- **タイル情報の一括管理**  
  配置済みタイルの一覧表示、フィルタ・ソート、個別編集・削除が可能です。

---

## ウィンドウの使い方

1. **ウィンドウの表示**  
   メニューから `Boys2 > Export Tile Map` を選択してウィンドウを開きます。

2. **グループIDの入力**  
   `Group ID` 欄に任意のグループIDを入力します。

3. **新規作成**  
   `新規作成` ボタンでテンプレートシーンを複製し、新しいシーンを作成・オープンします。

4. **編集**  
   `編集` ボタンで既存のシーンファイルを選択して開きます。

5. **エクスポート**  
   `エクスポート` ボタンで、現在開いているシーンのタイルマップ情報をテキストファイルとして出力します。

6. **タイル編集**  
   タイルリストから個別タイルの詳細編集・削除が可能です。

---

## マップの作り方

1. **道などのフィールドチップの配置**  
   Tile Paletteウィンドウから `Field` を選択し、任意のブラシでSceneView上に配置します。

2. **障害物やイベントなどのギミックマスの配置**  
   Tile Paletteウィンドウから `Gimmick` を選択し、任意のブラシでSceneView上に配置します。

3. **マップ設定**  
   - Camera倍率変更でカメラの拡大縮小が可能です。  
   - マップサイズは背景スプライトのサイズで調整します。  
   - 配置範囲の周囲を1マス幅で囲うため、想定マス数＋2で設定してください（例：50x50なら52x52）。

4. **実行**  
   ~~Unityのプレイモードで矢印キーによるカメラ操作が可能です。~~
   メンテ中


---

## 注意事項

- テンプレートシーン（`Assets/MapEditor/Scene/MapEditorTemplate.unity`）が必要です。
- シーン内に `Field` および `Gimmick` という名前のTilemapが必要です。
- タイルパレットウィンドウは `Window > 2D > Tile Palette` から手動で開いてください（自動ドッキング不可）。
- テンプレートシーン（`MapEditorTemplate.unity`）自体では編集できません。
- シーン名に `tilemap` を含む場合のみ利用可能です。
- タイル配置後は必ずエクスポートしてデータを保存してください。

---

## ファイル構成

- `Assets/MapEditor/Scripts/Editor/TileMapEditor.cs`  
  エディタ本体
- `Assets/MapEditor/Migration/`  
  エクスポート先ディレクトリ
- `Assets/MapEditor/Resources/TileDataManager_*.asset`  
  タイルデータ管理用アセット

---

## サポート

不明点や不具合は山田までご連絡ください。